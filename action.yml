name: 'Check for iOS Certs File'
description: 'Verify Cerificate files and Provisioning Profile'
inputs:
  slack_webhook_url:
    description: 'Slack Webhook URL'
  expire_limit_days:
    description: 'expire limit days'
    default: 30
  skip_development_certificate:
    description: 'skip Development Certificates'
    type: boolean
    default: false
  extra_message:
    description: 'slack message add extra message'
runs:
  using: "composite"
  steps:
    - name: "Verify iOS Certs files"
      shell: bash
      id: expire_check
      run: |
        bundle config set path 'vendor/bundle'
        bundle install

        export SLACK_WEBHOOK_URL=${{ inputs.slack_webhook_url }}
        export EXPIRE_LIMIT_DAYS=${{ inputs.expire_limit_days }}
        export SKIP_DEVELOPMENT_CERTIFICATE=${{ inputs.skip_development_certificate }}
        export EXTRA_MESSAGE=${{ inputs.extra_message }}
        bundle exec ruby $GITHUB_ACTION_PATH/check_certs_profile.rb
